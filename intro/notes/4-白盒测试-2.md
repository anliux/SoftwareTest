# 白盒测试-2


### 目录
<!-- GFM-TOC -->
* [1 路径测试](#1-路径测试)
  * [相关概念](#相关概念)
  * [独立路径测试](#独立路径测试)
  * [程序图](#程序图)
  * [环复杂度](#环复杂度)
* [2 独立路径测试用例设计](#2-独立路径测试用例设计)
  * [基于独立路径设计测试用例的步骤](#基于独立路径设计测试用例的步骤)
  * [独立路径的确定](#独立路径的确定)
  * [不可行路径问题](#不可行路径问题)
* [3 场景爆炸](#3-场景爆炸)
  * [含义](#含义)
  * [场景爆炸问题的解决方案](#场景爆炸问题的解决方案)
<!-- GFM-TOC -->



# 1 路径测试

## 相关概念
- ### 路径测试
  - 对程序路径的执行进行测试，保证路径执行是按照设计的预期进行的。
 
- ### 基于等价路径的测试图示
  ![基本等价路径的测试图示](https://raw.githubusercontent.com/anliux/SoftwareTest/master/intro/images/04-%E5%9F%BA%E4%BA%8E%E7%AD%89%E4%BB%B7%E8%B7%AF%E5%BE%84%E7%9A%84%E6%B5%8B%E8%AF%95%E5%9B%BE%E7%A4%BA.png)

- ### 基于等价路径测试的关键
  - 如何找到路径划分的规律
  - 如何定义路径的有效
  - 等价类和无效等价类

- ### 路径测试的法宝
  - 用于记录程序路径的地图
  - 最少线性无关路径数
  - 所有可能迅速找到缺陷的最佳独立路径


## 独立路径测试
- ### 独立路径测试原理图
  ![独立路径测试原理图](https://raw.githubusercontent.com/anliux/SoftwareTest/master/intro/images/04-%E7%8B%AC%E7%AB%8B%E8%B7%AF%E5%BE%84%E6%B5%8B%E8%AF%95%E5%8E%9F%E7%90%86%E5%9B%BE.png)

- ### 基于独立路径的测试
  - 若将向量空间视作向量组，则基就是向量组的极大线性无关组，维数就是向量组的秩。
  - 该向量空间内的任意向量，都可以用这组向量基来线性表示。

- ### 基于独立路径方法的关键
  - 如何确定向量空间的维数
  - 如何确定这组独立路径

- ### 等价路径与独立路径对比
  ![等价路径与独立路径对比](https://raw.githubusercontent.com/anliux/SoftwareTest/master/intro/images/04-%E7%AD%89%E4%BB%B7%E8%B7%AF%E5%BE%84%E4%B8%8E%E7%8B%AC%E7%AB%8B%E8%B7%AF%E5%BE%84%E5%AF%B9%E6%AF%94.png)

- ### 独立路径测试要解决如下三个核心问题：
  - 找到一张用于记录程序路径的地图；
  - 确定测试所需最少线性无关路径数；
  - 找到所有可能迅速找到缺陷的最佳独立路径.


## 程序图
- ### 定义
  - 程序图是反映程序结构复杂程序的一种图示，可以看做是一种简化、压缩的流程图或控制流图。
    
- ### 来源
  - 从源代码得到
  - 用来表示程序结构的一种有向图
    - 由圆圈和有向线段构成
    - 圆圈（节点）：执行语句
    - 有向线段：程序执行方向

- ### 程序图：简化的流程图
  - 简化节点形状

- ### 程序图的特点
  - （1）对节点形状进行简化，采用统一的形状表示；
  - （2）忽略数据声明。
  - （3）忽略注释语句。
  - （4）压缩串行语句
  - （5）压缩循环结构。


## 环复杂度
- ### 定义
  - 环复杂度是一种定量描述程序结构复杂度的度量模型。
  - 能够反映判定节点和循环的引入对程序结构及执行路径数目带来的不利影响
  
- ### 环复杂度的确定
  - （1）直观观察法。
    - 观察程序图将二维平面分割为封闭区域和开放区域的个数。 
    ![直观观察法](https://raw.githubusercontent.com/anliux/SoftwareTest/master/intro/images/04-%E7%8E%AF%E5%A4%8D%E6%9D%82%E5%BA%A6-%E7%9B%B4%E6%8E%A5%E8%A7%82%E5%AF%9F%E6%B3%95.png)
  - （2）公式计算法。
    - 利用程序图包含的边和顶点的数量来计算环复杂度。
    - 前提条件：程序图中无孤立节点；程序图是强连通图(双向连通)。
    - V(G) = e – n + 1。 
      - e：边的数量；n：节点数
    - 对程序图改造
      - 强连通的实质：节点间双向连通
      - 正常运行的程序：从入口单向执行到出口，并退出；
      - 解决方案：构建死循环。
    ![公式计算法](https://raw.githubusercontent.com/anliux/SoftwareTest/master/intro/images/04-%E7%8E%AF%E5%A4%8D%E6%9D%82%E5%BA%A6-%E5%85%AC%E5%BC%8F%E8%AE%A1%E7%AE%97%E6%B3%95.png)
  - （3）判定节点法。
    - 判定节点每增加一个，环复杂度就+1
    - 前提条件：仅计算两分支的判定节点
    - V(G) = P + 1。 
    ![判定节点法](https://raw.githubusercontent.com/anliux/SoftwareTest/master/intro/images/04-%E7%8E%AF%E5%A4%8D%E6%9D%82%E5%BA%A6-%E5%88%A4%E5%AE%9A%E8%8A%82%E7%82%B9%E6%B3%95.png)
  - 特殊情况的处理
    - 非单入单出程序；
    - 非标准判定节点。
  - 请注意这些方法使用的前提条件。

<!--GFM-TOC -->
* ### [返回目录](#目录)
<!--GFM-TOC -->



# 2 独立路径测试用例设计

## 基于独立路径设计测试用例的步骤
- ### step1：将源代码转为程序图，作为路径测试的地图；
  - 流程图、控制流图、程序图都可以，程序图最简洁。

- ### step2：计算程序图的环复杂度，确定独立路径测试集合的规模；
  - 独立路径集合的规模=程序图的环复杂度。

- ### step3：找到所有独立路径；
  - 确定主路径；
  - 根据主路径抽取其他独立路径。

- ### 剔除不可行路径；

- ### 补充路径测试；

- ### 根据要覆盖的路径，设计测试用例。


## 独立路径的确定 
- ### 独立路径的确定包括两个步骤：
  - 确定主路径
  - 以主路径为基础确定其他路径。

- ### （1）确定主路径
  - 主路径就是程序图中风险最高的那条执行路径。
  - 从结构来看，就是包含判定节点数目最多的一条路径。
    - 注：判定节点直观看就是分支节点，顺序无分支节点不属于判定节点。
    ![确定主路径](https://raw.githubusercontent.com/anliux/SoftwareTest/master/intro/images/04-%E7%A1%AE%E5%AE%9A%E4%B8%BB%E8%B7%AF%E5%BE%84%E5%9B%BE%E7%A4%BA.png)

- ### （2）确定其他路径
  - 以主路径为基础，针对主路径中的每个判定节点，依次覆盖已有独立路径中尚未覆盖的判定分支，生成新的独立路径。
  - 如果主路径未覆盖程序图中所有的判定节点，则需要针对主路径未覆盖到的那些判定节点，确定其余路径，直至找到所有独立路径。
    ![确定其他路径](https://raw.githubusercontent.com/anliux/SoftwareTest/master/intro/images/04-%E7%A1%AE%E5%AE%9A%E5%85%B6%E4%BB%96%E8%B7%AF%E5%BE%84%E5%9B%BE%E7%A4%BA.png)


## 不可行路径问题 
- ### 定义
  - 不可行路径就是在程序执行中不可能执行到的路径。
  
- ### 影响
  - 不可行路径破坏了独立路径测试的完备性和无冗余性；
  - 给测试带来额外的困难。

- ### 处理
  - 结合源代码抽取路径，而非仅从程序图抽取独立路径；
  - 补充其他具有较高风险的路径进行测试。

- ### 产生原因
  - 程序中存在相互关联的判定或循环结构

- ### 避免
  - 从测试的角度看待和分析需求
  - 设计合理的程序结构

<!--GFM-TOC -->
* ### [返回目录](#目录)
<!--GFM-TOC -->



# 3 场景爆炸
## 含义
- 黑盒测试中，当场景中包含的事件流越多，可构成的场景越多，可能无法穷尽，造成场景爆炸问题。


## 场景爆炸问题的解决方案 
- ### （1）基于独立路径构建典型场景
  - 将场景原理图看做程序图，借鉴独立路径测试方法，确定典型场景。
  - 优势：可以保证场景相互独立，无漏洞；
  - 劣势：不可避免不可行场景。

- ### （2）基于事件流的个数构建典型场景
  - 根据事件流的个数，本着面向缺陷隔离的独立测试原则，对每个事件流单独设计测试。
  - 优势：易于缺陷定位；
  - 劣势：不可避免不可行场景，且不保证场景独立和完备。 

- ### （3）基于需求构建典型场景
  - 根据原始需求设计场景。
  - 优势：保证每个场景可行；
  - 劣势：场景之间多存在冗余，且场景设计严重依赖于测试人员对需求的熟悉程度。

- ### 建议的使用策略
  - 当事件流之间相互独立时，建议基于独立路径设计场景。
  - 否则，建议先基于独立路径设计场景，并保证场景可行，然后基于需求补充场景。

<!--GFM-TOC -->
* ### [返回目录](#目录)
<!--GFM-TOC -->



### END
